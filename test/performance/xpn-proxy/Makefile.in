

#
# Definitions
#

MAKE         		= make -s
CC           		= @CC@
MYHEADER     		= -I../../../include/ -I../../../include/base -I../../../include/xpn_client/ -I../../../include/bypass
MYLIBPATHPROXY    	= -L../../../src/base -L../../../src/xpn_proxy
LIBRARIESPROXY    	= -lxpn_proxy_client -lpthread -ldl -lmosquitto -lbase
MYFLAGS      		= -O3 -Wall -D_REENTRANT -DPOSIX_THREADS -DHAVE_CONFIG_H -D_GNU_SOURCE


#
# Rules
#

all:  proxy-open-write-close proxy-open-read-close  proxy-create-dirs-test proxy-remove-dirs-test

proxy-open-write-close: open-write-close.o
	$(CC)  -o proxy-open-write-close open-write-close.o $(MYLIBPATHPROXY) $(LIBRARIESPROXY)

proxy-open-read-close: open-read-close.o
	$(CC)  -o proxy-open-read-close  open-read-close.o  $(MYLIBPATHPROXY) $(LIBRARIESPROXY)

proxy-create-dirs-test: create-dirs-test.o
	$(CC)  -o proxy-create-dirs-test create-dirs-test.o $(MYLIBPATHPROXY) $(LIBRARIESPROXY)

proxy-remove-dirs-test: remove-dirs-test.o
	$(CC)  -o proxy-remove-dirs-test  remove-dirs-test.o  $(MYLIBPATHPROXY) $(LIBRARIESPROXY)


%.o: %.c
	$(CC) $(CFLAGS)  $(MYFLAGS) $(MYHEADER) -c $< -o $@

clean:
	rm -f ./*.o
	rm -f ./proxy-open-write-close ./proxy-open-read-close ./proxy-create-dirs-test ./proxy-remove-dirs-test
