

#
# Definitions
#

MAKE         	= make -s
CC           	= @CC@
MYHEADER     	= -I../../../include/ -I../../../include/base -I../../../include/xpn_client/ -I../../../include/bypass -I../../../../../bin/mosquitto/include
LIBPATH  		= -L../../../src/base -L../../../../../bin/mosquitto/lib
LIBRARIES    	= -lpthread -ldl -lmosquitto -lbase
MYFLAGS      	= -O3 -Wall -D_REENTRANT -DPOSIX_THREADS -DHAVE_CONFIG_H -D_GNU_SOURCE


#
# Rules
#

all:  xpn-open-write-close xpn-open-read-close  xpn-create-dirs-test xpn-remove-dirs-test xpn-xpn-tests

xpn-open-write-close: xpn-open-write-close.o
	$(CC)  -o xpn-open-write-close xpn-open-write-close.o  -lxpn_proxy_client -L../../../src/xpn_proxy $(LIBPATH) $(LIBRARIES)

xpn-open-read-close: xpn-open-read-close.o
	$(CC)  -o xpn-open-read-close  xpn-open-read-close.o  -lxpn_proxy_client -L../../../src/xpn_proxy $(LIBPATH) $(LIBRARIES)

xpn-create-dirs-test: xpn-create-dirs-test.o
	$(CC)  -o xpn-create-dirs-test xpn-create-dirs-test.o -lxpn_proxy_client -L../../../src/xpn_proxy $(LIBPATH) $(LIBRARIES)

xpn-remove-dirs-test: xpn-remove-dirs-test.o
	$(CC)  -o xpn-remove-dirs-test  xpn-remove-dirs-test.o  -lxpn_proxy_client -L../../../src/xpn_proxy $(LIBPATH) $(LIBRARIES)

xpn-xpn-tests: xpn-xpn-tests.o
	$(CC)  -o xpn-xpn-tests  xpn-xpn-tests.o -lxpn_proxy_client -L../../../src/xpn_proxy $(LIBPATH) $(LIBRARIES)



%.o: %.c
	$(CC) $(CFLAGS)  $(MYFLAGS) $(MYHEADER) -c $< -o $@

clean:
	rm -f ./*.o
	rm -f ./xpn-open-write-close ./xpn-open-read-close ./xpn-create-dirs-test ./xpn-remove-dirs-test ./xpn-xpn-tests

