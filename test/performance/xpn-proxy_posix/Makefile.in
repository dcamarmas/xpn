

#
# Definitions
#

MAKE       = make -s
CC         = @CC@
MYHEADER   = -I../../../include/  -I../../../include/base  -I../../../include/xpn_client/  -I../../../include/bypass -I../../../../../bin/mosquitto/include
LIBPATH    = -L../../../src/base -L../../../../../bin/mosquitto/lib
LIBRARIES  = -lpthread -ldl -lmosquitto -lbase
MYFLAGS    = -O3 -Wall -D_REENTRANT -DPOSIX_THREADS -DHAVE_CONFIG_H -D_GNU_SOURCE


#
# Rules
#

all: posix-open-write-close posix-open-read-close  posix-create-dirs-test posix-remove-dirs-test posix-xpn-tests

posix-open-write-close: posix-open-write-close.o
	$(CC)  -o posix-open-write-close  posix-open-write-close.o $(LIBPATH) $(LIBRARIES)

posix-open-read-close:  posix-open-read-close.o
	$(CC)  -o posix-open-read-close   posix-open-read-close.o  $(LIBPATH) $(LIBRARIES)

posix-create-dirs-test: posix-create-dirs-test.o
	$(CC)  -o posix-create-dirs-test  posix-create-dirs-test.o $(LIBPATH) $(LIBRARIES)

posix-remove-dirs-test: posix-remove-dirs-test.o
	$(CC)  -o posix-remove-dirs-test  posix-remove-dirs-test.o $(LIBPATH) $(LIBRARIES)

posix-xpn-tests: posix-xpn-tests.o
	$(CC)  -o posix-xpn-tests         posix-xpn-tests.o        $(LIBPATH) $(LIBRARIES)



%.o: %.c
	$(CC) $(CFLAGS)  $(MYFLAGS) $(MYHEADER) -c $< -o $@

clean:
	rm -f ./*.o
	rm -f ./posix-open-write-close ./posix-open-read-close ./posix-create-dirs-test ./posix-remove-dirs-test ./posix-xpn-tests

